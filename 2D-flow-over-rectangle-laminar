CFD Problem's Physics & Theory
In developing CFD simulation for a fluid mechanic problem understanding the general physics and fundamental theory of the problem is extremely important. This knowledge would provide users the ability to make logical engineering decision about the geometry of the CFD domain, choice of boundary conditions and numerical models for the CFD simulation. Furthermore, user will have a general big picture on the expected outcome from the CFD simulation. These knowledges and abilities form the foundation for a successful implementation and validation of the CFD simulation.
In other words understanding physics and theory of a problem before developing a CFD simulation for it can be thought as turning a flash light on before taking any step in a completely dark room. This simple but wise action would avoid any potential accident and failure, while entering and discovering the detail of the room. Hence, let's review the fundamental physics and theory behind the problem of "2D Laminar Flow in a Rectangular Pipe." as the first step for development and validation of CFD simulation for this problem of interest:
In order to discuss the theory of behind the flow field evolution as it moves inside a 2D rectangular pipe consider the general form of the Navier-Stokes equation as follows:
DV/Dt=−1ρ∇p+g+ν∇2V.DVDt=−1ρ∇p+g+ν∇2V.
This equation indicates that the material derivative of the velocity field (i.e. the summation of external forces per unit mass in a Lagrangian reference frame) is balanced with the summation of pressure, body and viscous forces per unit mass within the flow field (i.e. forces in Eulerian reference frame). For the case of laminar flow in a pipe, in most of the engineering applications the incoming flow into the pipe has an almost constant and uniform velocity. However, it is probable that the incoming flow velocity has some temporal fluctuations. In all cases these fluctuations should be estimated to declare the degree of steadiness of the flow. In generic cases the assumption of steady/uniform flow or flow with minor temporal fluctuations is a reasonable assumption. Furthermore, considering a horizontal pipe flow, the effect of body forces can become negligible. Applying these two assumptions the Navier-Stokes equation will be reduced to:
0=−1ρ∇p+g+ν∇2V.0=−1ρ∇p+g+ν∇2V.
Once the flow enters the pipe, due to the no slip boundary condition at the pipe's walls fluid velocity will instantly become zero at this boundary. This phenomena results into a strong velocity gradient across the width of the pipe and effects the velocity profile right at the entrance region of the pipe. This interaction between fluid element and solid walls forms a thin layer at the solid-fluid boundary called Boundary Layer. Inside the boundary layer the flow field evolution is complex and hard to theoretically model. However, moving further downstream the two boundary layers, formed at pipe's top and bottom walls, merge with each other and the velocity gradient becomes smoother. After a specific length the velocity profile gets a parabolic shape and the flow becomes fully developed. In this state the shape of the velocity profile becomes fix along the length of the pipe. This short length is referred to as the entrance region. The entrance length for laminar flows is experimentally related to the Reynolds number and hydraulic diameter of non-circular (i.e. rectangular) pipe as follows:
Le=0.05 . Rew . Dh ,Le=0.05 . Rew . Dh ,
where  Rew  Rew  is the Reynolds number of the pipe based on the pipe's width. DhDh is the hydraulic diameter of the pipe. Considering unit depth DhDh is defined as Dh=4APDh=4AP, where AA and PP are area and perimeter of the pipe's rectangular inlet respectively.
For a fully developed flow, it can be assumed that the pressure field variation in any directions other than the streamwise direction (i.e. x-direction in this problem) will become negligible. Furthermore, the change in the streamwise velocity is only significant across the pipe's cross section (i.e. y-direction) due to the no slip boundary conditions at the bottom and top walls of the pipe. Applying these assumptions the Navier-Stokes equation can be furthermore reduced to:
1ρdpdx=νd2udy2.1ρdpdx=νd2udy2.
In order to solve the above equation, to obtain the general velocity profile and pressure drop across the pipe we consider:
dpdx=−K′.dpdx=−K′.
νrddr(rdudr)=−K′.νrddr(rdudr)=−K′.
In the above equations K′K′ is a constant and the negative sign implies the pressure drop across the pipe. Integration of these equation will result into the general velocity profiles with two constant values. Applying two following boundary conditions in the flow field would lead into a determined system equations and gives values for C1 and C2.
u=0,  at  r=±D2  (no slip)u=0,  at  r=±D2  (no slip)
dudr=0,  at  r=0  (symmetry)dudr=0,  at  r=0  (symmetry)
The general form of velocity profile will be as follows:
u=K′D216μ[ 1−(2rD)2 ],u=K′D216μ[ 1−(2rD)2 ],
where K' is the only undefined constant. Considering the average velocity across the cross section of the duct one can write:
V¯=1A∫udA=1π4D2∫D20u 2π rdr=K′D232μ.V¯=1A∫udA=1π4D2∫0D2u 2π rdr=K′D232μ.
As a result of this algebraic manipulation the general form of velocity profile and pressure gradient across the pipe will be as follows:
uV¯=2 [1−(2rD)2].uV¯=2 [1−(2rD)2].
K′=−dpdx=32μV¯D2.K′=−dpdx=32μV¯D2.
It should be noted that this derivation shows that the velocity profile evolution is complex within the entrance length of the pipe and can not be modeled theoretically. The only approach to study flow field evolution in this region and determine this length is through experimental and numerical analyses. However, once the flow reaches the fully developed state, it will get a fixed parabolic shape with a defined equation that satisfies all physical boundary conditions within the flow field. With this review one has developed an in-depth physical and theoretical understanding of the laminar flow inside a 2D rectangular pipe and approximate the expected results from the CFD simulations. Now one can move forward to initiate developing the CFD domain and simulations for this problem of interest.
For more details on the physics, theory and equation derivation please see chapter 8 of "A Physical Introduction to Fluid Mechanics by Alexander J. Smits" 2nd edition. Download Book Here!


Introduction:
This guide will show how to set up the simulation for a viscous flow over a rectangle with Reynold’s number of 40. 

ANSYS Workbench 
• Start Fluent in the Workbench window. 
• Now right click on the Geometry tab and select the properties option, a Properties of Schematic window will open. Change the Analysis Type under the Advanced Geometry Options from 3D to 2D. 
• Save your file
• Back to the Project Schematic Window, click twice on the Geometry tab. This action will launch ANSYS Design Modeler . ANSYS Design Modeler 
• Set Units to Millimeters and click OK. Note that this will change the units only in the ANSYS Design Modeler. 
• Right click on icon corresponding to XYPlane and select look at. 
• Down below the Tree Outline window you will see the Sketching and Modeling tabs. Select the Sketching tab. 
• In the Sketching Toolboxes select the Settings tab. 
• Select Grid and activate the buttons Show in 2D and Snap. This will allow you to see the grids. 
• Go back to Modeling tab and click on the icon corresponding to New Sketch to create sketch 1. 
• Click on Sketch 1 and then click on the Sketching tab. 
• Select the Draw tab and choose Rectangle. 
• Draw a rectangle (at this point the size of the rectangle is not important, it will be adjusted in the next step). 
• Once the rectangle has been created select the tab corresponding to Dimensions and choose General. Left click on the rectangle you just drew and drag the mouse outwards to the top without releasing the mouse button until you see a measuring line ( the one with arrows on each end) indicating the length of the horizontal edge, then release button and repeat this process to get another measuring line for the vertical edge. 
• On the new window that appears adjust the length of the horizontal edge to 20m, and the length of the vertical edge to 20 m, and click on Generate. 
• From the center of the rectangle, sketch a smaller rectangle with 2m horizontal length and 1m vertical length. 
• Now go to the Concept tab and select Surfaces From Sketches.
• Select Sketch 1, rectangle must become yellow. Click on Apply on the Details View window. The rectangle will become cyan. Now, click on Generate. If the rectangle becomes gray it means you have created a rectangular surface with the small rectangle become hollow.
• On the upper tools bar, select the icon corresponding to Selection Filter: Edges. 
• Place the mouse near the left end of the rectangle and left click to highlight it (green). Once it is green right click to select Named Selection. Then click on Apply, and finally on Generate. Right click on the new entity created, NamedSel1, and choose Rename. Type Inlet and hit enter. Repeat this process for Outlet, top wall and bottom wall. 
• Save your project. Close DM and go back to the Workbench. At this point there should be a green check sign in front of Geometry. 

Meshing 
• To be able to control multiple mesh element, you can sketch multiple rectangle on the large rectangle. Based on the characteristic of the flow, the fine mesh region should be at the four corners and surround the edges of the small rectangle. Those fine mesh region will be the place that you sketch extra rectangle.
• Now go to the Concept tab and select Surfaces From Sketches, then highlight the lines and click Generate. Multiple surfaces should appear. Figure. XX show my geometry for meshing.
“Insert picture”
• On your ANSYS Workbench, double click on the tab corresponding to mesh. 
• Select Mesh from the outline window. 
• In the Details of Mesh window, click the plus sign next to Sizing to expand it. 
• Change Relevance Center to Fine.  
• Click on Update. You will notice that even the Fine option does not gives us a fine enough mesh. To solve this issue select the rectangle and click on the Mesh Control tab and select Sizing on the surfaces you created in the beginning of the Mesh process. The other way to help increase Mesh elements is to right click in the Mesh option, choose Refine Mesh and choose the surface of mesh.
• Once the rectangle is green in the Details of Face Sizing window, click on the icon in front of the Geometry and click on Apply. At this point your rectangle is in dark blue.
• Change the Element size from Default to 0.001. 
• Click on Update and check the mesh by clicking on the Mesh icon under the tree outline. Your mesh should be fine enough now. 
• Save your project. Close Meshing and go back to the Workbench. At this point there should be a green check sign in front of Mesh. 
Setup 
• On your ANSYS Workbench, double click on the tab corresponding to Setup. 
• Click OK on the Fluent Launcher window. 
• On the left side you will see a menu showing three main sections: Setup, Solution, and Results. 
• In the Setup, click on Models and make sure everything on the Models window is off except the third option corresponding to Viscous-Laminar. 
• Click on Materials, highlighting the option corresponding to Fluid, click on Create/Edit. In the new window name your material air and change the density and viscosity to their corresponding values mentioned in the problem. Click on Change/Create. In our case of 40 Reynold’s number, I set everything to be one, and change the density to be 40.
• Now click on the Cell Zone Conditions tab and click on the Edit... button. Change the Material Name to air that you just created. 
• Now input the boundary conditions. Select your Inlet and click on Edit. Set the Magnitude of the Velocity to 1 (m/s). Click OK. 
• On the outlet make sure that the Type is set to pressure-outlet. Click on Edit... and make sure that the Gauge Pressure (pascal) is 0. Click OK. 
• Make sure that both top and bottom walls are defined as Type wall. This automatically sets the no-slip and no-penetration conditions on the walls. 
• Under Monitors pick Residuals and go to Edit. Change the Absolute Criteria for the continuity to 0.0001 and deactivate Check for x-velocity and y-velocity. For the better result before converge, the residual can be set smaller.
• Under Solution, select Solution Initialization and click on Initialize using the Standard Initializiation. 
• Go to Run Calculation, set Number of Iterations to 1000, and click on Calculate. 

Results 
• After the solution is converged go to Graphics and Animations. Select Cotours and click on Set Up. 
• From Options select Filled and choose Contours of Velocity... and Velocity Magnitude and click on Display. This will allow you to see the velocity magnitude on the rectangle. You can repeat this process with other variables to get other contour plots. 
• To see the outlet velocity profile, go to Plots under the Graphics and Animations section and select the XY plot and click Set Up... . Choose Y Axis function as Velocity... and Velocity Magnitude. Select outlet from the Surfaces menu and click on Plot. Note that you can do the same process to other variables on other surfaces. You can also define a new surface and analyze some variable on that new surface in this section using the New Surfaces tab. For example you can plot the velocity magnitude or pressure over the center-line to find the location at which flow is fully developed. Make sure to be comfortable with the direction vector :-). 
• Finally you can determine the forces exerted by the fluid on the walls using the Reports section under Results. Click on Reports, select Forces and press the Set Up ... button. Select one of your walls and click on Print. A print out with all the forces acting on the selected wall will be shown in the command window. 
• To find drag coefficient, use the total force found in the report and apply to the formula:
 

Where ρ is 40 kg/m^3, u is 1 m/s and A is 1 m^2.
